import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.JTable;
import javax.swing.JScrollPane;
import javax.swing.table.JTableHeader;
import java.awt.Color;
import java.awt.Font;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JOptionPane;
import javax.swing.JOptionPane;
import java.sql.*;
public class EditQuary{
	//public static void main(String[] args){
    ResultSet r;
	JPanel jp;
	JTextField jtf;
	JTextField jtf1;
	JTextField jtf2;
	JTextField jtf3;
	JTextField jtf4;
	ResultSet rs;
	
	public void update(){
		

		JFrame jf=new JFrame("Update a Record");
		jp=new JPanel();
	    jp.setLayout(null);
	    jf.setExtendedState(JFrame.MAXIMIZED_BOTH);
	    jp.setBackground(Color.darkGray);


	    JLabel jl1=new JLabel("Update a Record");
	    jl1.setBounds(500,10,500,55);
	    jl1.setFont(new Font("Arial",Font.BOLD,60));
	    jl1.setForeground(Color.blue);
	    jp.add(jl1);

	    JLabel jl2=new JLabel("Enter Your Index Number:");
	    jl2.setBounds(100,90,600,50);
	    jl2.setFont(new Font("Arial",Font.PLAIN,50));
	    jl2.setForeground(Color.white);
	    jp.add(jl2);

	    jtf=new JTextField(20);
	    jtf.setBounds(700,90,600,50);
	    jtf.setFont(new Font("Arial",Font.BOLD,50));
	    jp.add(jtf);


	    emptyTable();

	    JButton jb1=new JButton("Submit");
	    jb1.setBounds(1200,150,100,50);
	    jb1.setFont(new Font("Arial",Font.BOLD,20));
	    jb1.addActionListener(new ActionListener(){
	    	public void actionPerformed(ActionEvent e){
	    		sql();
	    	}
	    });
	    jp.add(jb1);
 
        JLabel jln=new JLabel("Enter Your Name:");
		jln.setFont(new Font("Arial",Font.PLAIN,30));
		jln.setBounds(150,325,400,50);
		jln.setForeground(Color.white);
		jp.add(jln);

		jtf1=new JTextField(30);
		jtf1.setBounds(500,325,400,50);
		jtf1.setFont(new Font("Arial",Font.BOLD,30));
		jp.add(jtf1);


		JLabel jln1=new JLabel("Enter Your index no:");
		jln1.setBounds(150,400,400,50);
		jln1.setFont(new Font("Arial",Font.PLAIN,30));
		jln1.setForeground(Color.white);
		jp.add(jln1);

		jtf2=new JTextField(30);
		jtf2.setBounds(500,400,400,50);
		jtf2.setFont(new Font("Arial",Font.BOLD,30));
		jp.add(jtf2);

		JLabel jln2=new JLabel("Enter Your T_Marks no:");
		jln2.setBounds(150,475,400,50);
		jln2.setFont(new Font("Arial",Font.PLAIN,30));
		jln2.setForeground(Color.white);
		jp.add(jln2);

		jtf3=new JTextField(30);
		jtf3.setBounds(500,475,400,50);
		jtf3.setFont(new Font("Arial",Font.BOLD,30));
		jp.add(jtf3);

		JLabel jln3=new JLabel("Enter Your P_Marks no:");
		jln3.setBounds(150,550,400,50);
		jln3.setFont(new Font("Arial",Font.PLAIN,30));
		jln3.setForeground(Color.white);
		jp.add(jln3);

		jtf4=new JTextField(30);
		jtf4.setBounds(500,550,400,50);
		jtf4.setFont(new Font("Arial",Font.BOLD,30));
		jp.add(jtf4);
        
        JButton jb4=new JButton("Submit");
	    jb4.setBounds(720,620,180,70);
	    jb4.setFont(new Font("Arial",Font.BOLD,40));
	    jb4.setForeground(Color.blue);
	    jb4.addActionListener(new ActionListener(){
	    	public void actionPerformed(ActionEvent e){
	    		sqlinsert();
	    		
	    	}
	    });
	    jp.add(jb4);
	    

	    JButton jb3=new JButton("Exit");
	    jb3.setBounds(1200,640,100,50);
	    jb3.setFont(new Font("Arial",Font.BOLD,20));
	    jb3.addActionListener(new MyListenerExitEdit());
	    jp.add(jb3);

	   
		JButton jb2=new JButton("Clear");
	    jb2.setBounds(1050,640,100,50);
	    jb2.setFont(new Font("Arial",Font.BOLD,20));
	    jb2.addActionListener(new ActionListener(){
	    	public void actionPerformed(ActionEvent e){
	    		jtf.setText("");
	    		emptyTable();
	    		jtf1.setText("");
	    		jtf2.setText("");
	    		jtf3.setText("");
	    		jtf4.setText("");
	    	}
	    });
	    jp.add(jb2);


	   	jf.add(jp);
	    jf.setVisible(true);
	    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);


	}
	public void sql(){		
		try{
			Class.forName("com.mysql.jdbc.Driver");
			Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/studentdatagui","root","");
			Statement stmt=con.createStatement();
			//r=stmt.executeQuery("Select * from marks where st_index="+jtf.getText()+"");
			rs=stmt.executeQuery("Select * from marks where st_index='"+jtf.getText()+"' "); 
			rs.next();
			//System.out.println(rs.getString(1)+rs.getString(2)+rs.getString(3)+rs.getString(4));
			table();
			con.close();	        

	    }catch(Exception e){
	        //JOptionPane.showMessageDialog(null,"Please enter Correct Index");
	        JOptionPane.showMessageDialog(null,e);

		}

	}
	public void table(){
		try{
			String [][] records = {{rs.getString(1),rs.getString(2),rs.getString(3),rs.getString(4)}};
		    String [] hedar={"Index no","Name","T_Marks","P_Marks"};
		    JTable jt=new JTable(records,hedar);
		    jt.setRowHeight(40);
		    Font font=new Font("Arial",Font.BOLD,28);
		    jt.setFont(font);
		    JTableHeader tableHeader = jt.getTableHeader();
		    tableHeader.setFont(font);
		    tableHeader.setForeground(Color.green);
		    jt.getColumnModel().getColumn(1).setPreferredWidth(700);

		    JScrollPane jsp=new JScrollPane(jt);
		    jsp.setBounds(50,210,1300,80);
		    jp.add(jsp);
		}catch(Exception e){
			JOptionPane.showMessageDialog(null,"Please enter Correct Index");
			emptyTable();
			//JOptionPane.showMessageDialog(null,e);
		}
	}
	public void emptyTable(){
		 try{
			String [][] records = {};
		    String [] hedar={"Index no","Name","T_Marks","P_Marks"};
		    JTable jt=new JTable(records,hedar);
		    jt.setRowHeight(40);
		    Font font=new Font("Arial",Font.BOLD,28);
		    jt.setFont(font);
		    JTableHeader tableHeader = jt.getTableHeader();
		    tableHeader.setFont(font);
		    tableHeader.setForeground(Color.green);
		    jt.getColumnModel().getColumn(1).setPreferredWidth(700);

		    JScrollPane jsp=new JScrollPane(jt);
		    jsp.setBounds(50,210,1300,80);
		    jp.add(jsp);
		}catch(Exception e){

		}
	}
	public void sqlinsert(){
		try{
			Class.forName("com.mysql.jdbc.Driver");
			Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/studentdatagui","root","");
            Statement stat=con.createStatement();
			stat.executeUpdate("UPDATE marks SET st_index='"+jtf2.getText()+"',name='"+jtf1.getText()+"',t_marks='"+jtf3.getText()+"',p_marks='"+jtf4.getText()+"' WHERE st_index='"+jtf.getText()+"' ");
			JOptionPane.showMessageDialog(null,"Data sucessfully updated");
			jtf.setText("");
	    	emptyTable();
	    	jtf1.setText("");
	    	jtf2.setText("");
	    	jtf3.setText("");
	    	jtf4.setText("");
		}catch(Exception e){
			JOptionPane.showMessageDialog(null,"This index number used before");
			jtf2.setText("");
		}
	}

}
class MyListenerExitEdit implements ActionListener{
	public void actionPerformed(ActionEvent e){
		int result = JOptionPane.showConfirmDialog(null,"Do you want to exit?", "Exit",
               JOptionPane.YES_NO_OPTION,
               JOptionPane.QUESTION_MESSAGE);
            if(result == JOptionPane.YES_OPTION){
            	SelectQuary sq=new SelectQuary();
                Menu menu=new Menu();
			    menu.list();
			   			   
            }else if (result == JOptionPane.NO_OPTION){
               
            }else {
               
            }

	}
}

















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































	
